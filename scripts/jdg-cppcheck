#!/bin/sh

if ! which cppcheck >/dev/null 2>&1 ; then
  echo "cppcheck not available yet, installing cppcheck Debian package"
  sudo apt-get -y install cppcheck
fi

mkdir -p reports

# Enable all checks -j $numThreads ??
/usr/bin/cppcheck -j $(/usr/bin/nproc) --force --xml --xml-version=2 source 2> reports/cppcheck.xml

# hard check
#/usr/bin/cppcheck -j $(/usr/bin/nproc) --enable=all --force --inconclusive --xml --xml-version=2 source 2> reports/cppcheck.xml
